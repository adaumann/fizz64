program test;


// Set disk output
@use "compression/compression"

var	
//@requirefile "singlev_packed_resources1.ras" "Please compile the corresponding paw before attempting to compile this program." 
//@include "singlev_packed_resources1.ras"


p : pointer;
i : byte;

interrupt NMI();
begin
end;

procedure LoadLevelFromCrt(lev: byte, isSingle: byte);
var
	bank: byte;
	p : pointer;
begin
	p := CreatePointer($80, 00);
	if(isSingle = true) then begin
		if(lev <= $1f) then 
			bank := $0c
		else begin 
			bank := 5;
			lev := lev - $20;
		end;
		for i := 0 to lev do
		begin
			p := p + $100;
		end;		
	end
	else begin 
		if(lev <= $13) then 
			bank := $0d
		else begin 
			bank := $0e;
			lev := lev - $14;
		end;
		for i := 0 to lev do
		begin
			p := p + $180;
		end;		
	end;
	setmemoryconfig(1,1,1);
	Poke(^$DE00,0,bank);
    Compression::Decompress(p, $1bfe);	
end;


begin
	LoadLevelFromCrt(29, false);
	Loop();
end.